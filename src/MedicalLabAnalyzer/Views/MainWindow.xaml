<Window x:Class="MedicalLabAnalyzer.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
        Title="Medical Lab Analyzer - نظام تحليل المختبر الطبي"
        Height="800" Width="1200"
        WindowStartupLocation="CenterScreen"
        MinHeight="600" MinWidth="800"
        FlowDirection="RightToLeft"
        Background="{DynamicResource MaterialDesignPaper}"
        TextElement.Foreground="{DynamicResource MaterialDesignBody}"
        FontFamily="{DynamicResource MaterialDesignFont}">

    <Window.Resources>
        <ResourceDictionary>
            <!-- Custom Styles -->
            <Style x:Key="NavigationButtonStyle" TargetType="Button" BasedOn="{StaticResource MaterialDesignFlatButton}">
                <Setter Property="Height" Value="48"/>
                <Setter Property="Margin" Value="8,4"/>
                <Setter Property="HorizontalAlignment" Value="Stretch"/>
                <Setter Property="HorizontalContentAlignment" Value="Left"/>
                <Setter Property="Padding" Value="16,0"/>
                <Setter Property="FontSize" Value="14"/>
            </Style>
        </ResourceDictionary>
    </Window.Resources>

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="250"/>
            <ColumnDefinition Width="*"/>
        </Grid.ColumnDefinitions>

        <!-- Navigation Sidebar -->
        <materialDesign:Card Grid.Column="0" Margin="8" Padding="0" 
                            Background="{DynamicResource MaterialDesignSurface}"
                            materialDesign:ElevationAssist.Elevation="Dp2">
            <StackPanel>
                <!-- Header -->
                <Border Background="{DynamicResource MaterialDesignPrimary}" 
                        Padding="16" Height="80">
                    <StackPanel>
                        <TextBlock Text="Medical Lab Analyzer" 
                                   FontSize="16" FontWeight="Bold"
                                   Foreground="White" HorizontalAlignment="Center"/>
                        <TextBlock Text="نظام تحليل المختبر الطبي" 
                                   FontSize="12" Foreground="White" 
                                   HorizontalAlignment="Center" Margin="0,4,0,0"/>
                    </StackPanel>
                </Border>

                <!-- Navigation Menu -->
                <ScrollViewer VerticalScrollBarVisibility="Auto" MaxHeight="600">
                    <StackPanel Margin="8">
                        <!-- Dashboard - متاح لجميع المستخدمين -->
                        <Button x:Name="btnDashboard" Style="{StaticResource NavigationButtonStyle}"
                                Click="btnDashboard_Click" Visibility="Visible">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="ViewDashboard" Width="20" Height="20" 
                                                       Margin="0,0,12,0"/>
                                <TextBlock Text="لوحة التحكم"/>
                            </StackPanel>
                        </Button>

                        <!-- Patients - متاح للمدير والمستقبل -->
                        <Button x:Name="btnPatients" Style="{StaticResource NavigationButtonStyle}"
                                Click="btnPatients_Click" Visibility="Collapsed">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="AccountMultiple" Width="20" Height="20" 
                                                       Margin="0,0,12,0"/>
                                <TextBlock Text="إدارة المرضى"/>
                            </StackPanel>
                        </Button>

                        <!-- Exams - متاح للمدير وفني المختبر -->
                        <Button x:Name="btnExams" Style="{StaticResource NavigationButtonStyle}"
                                Click="btnExams_Click" Visibility="Collapsed">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="FileDocument" Width="20" Height="20" 
                                                       Margin="0,0,12,0"/>
                                <TextBlock Text="إدارة الفحوصات"/>
                            </StackPanel>
                        </Button>

                        <!-- Video Analysis - متاح للمدير وفني المختبر -->
                        <Button x:Name="btnVideoAnalysis" Style="{StaticResource NavigationButtonStyle}"
                                Click="btnVideoAnalysis_Click" Visibility="Collapsed">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="Video" Width="20" Height="20" 
                                                       Margin="0,0,12,0"/>
                                <TextBlock Text="تحليل الفيديو CASA"/>
                            </StackPanel>
                        </Button>

                        <!-- Reports - متاح للمدير وفني المختبر -->
                        <Button x:Name="btnReports" Style="{StaticResource NavigationButtonStyle}"
                                Click="btnReports_Click" Visibility="Collapsed">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="ChartLine" Width="20" Height="20" 
                                                       Margin="0,0,12,0"/>
                                <TextBlock Text="التقارير"/>
                            </StackPanel>
                        </Button>

                        <Separator Margin="16,8"/>

                        <!-- Settings - متاح للمدير فقط -->
                        <Button x:Name="btnSettings" Style="{StaticResource NavigationButtonStyle}"
                                Click="btnSettings_Click" Visibility="Collapsed">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="Settings" Width="20" Height="20" 
                                                       Margin="0,0,12,0"/>
                                <TextBlock Text="الإعدادات"/>
                            </StackPanel>
                        </Button>

                        <!-- Backup - متاح للمدير فقط -->
                        <Button x:Name="btnBackup" Style="{StaticResource NavigationButtonStyle}"
                                Click="btnBackup_Click" Visibility="Collapsed">
                            <StackPanel Orientation="Horizontal">
                                <materialDesign:PackIcon Kind="BackupRestore" Width="20" Height="20" 
                                                       Margin="0,0,12,0"/>
                                <TextBlock Text="النسخ الاحتياطي"/>
                            </StackPanel>
                        </Button>
                    </StackPanel>
                </ScrollViewer>

                <!-- User Info -->
                <Border Background="{DynamicResource MaterialDesignDivider}" 
                        Padding="16" Margin="8,0,8,8">
                    <StackPanel>
                        <TextBlock x:Name="txtUserName" Text="Welcome - مرحباً" 
                                   FontWeight="Bold" HorizontalAlignment="Center"/>
                        <TextBlock x:Name="txtUserRole" Text="User - مستخدم" 
                                   FontSize="12" HorizontalAlignment="Center" Margin="0,4,0,0"/>
                        <Button x:Name="btnLogout" Content="Logout - تسجيل الخروج" 
                                Style="{StaticResource MaterialDesignOutlinedButton}"
                                Margin="0,8,0,0" Click="btnLogout_Click"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </materialDesign:Card>

        <!-- Main Content Area -->
        <Grid Grid.Column="1" Margin="8">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- Content Header -->
            <materialDesign:Card Grid.Row="0" Margin="0,0,0,8" Padding="16"
                                Background="{DynamicResource MaterialDesignSurface}"
                                materialDesign:ShadowAssist.ShadowDepth="Depth1">
                <TextBlock x:Name="txtPageTitle" Text="Dashboard - لوحة التحكم" 
                           FontSize="20" FontWeight="Bold"/>
            </materialDesign:Card>

            <!-- Content Frame -->
            <ContentControl x:Name="contentFrame" Grid.Row="1" 
                           Background="{DynamicResource MaterialDesignPaper}"/>
        </Grid>

        <!-- Loading Overlay -->
        <Grid x:Name="loadingOverlay" Grid.ColumnSpan="2" 
              Background="#80000000" Visibility="Collapsed">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <ProgressBar IsIndeterminate="True" Width="100" Height="4" 
                             Foreground="{DynamicResource MaterialDesignPrimary}"/>
                <TextBlock Text="Loading - جاري التحميل..." 
                           Foreground="White" Margin="0,16,0,0" 
                           HorizontalAlignment="Center"/>
            </StackPanel>
        </Grid>
    </Grid>
</Window>